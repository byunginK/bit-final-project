<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
<meta charset="UTF-8">
<title>작가 신청하기</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


</head>
<body>

<form th:action="@{/writer/application/appComplete}" name="form" method="POST" enctype="multipart/form-data">
<input type="hidden" class="apply" id="userSeq" name="userSeq" th:value="${param.userSeq}"> 


<div>
	<div class="img_wrap">
		<img id="profile-image" border="1" src="/static/profile/profiledefault.png"/>
	</div>
</div>
	<input type="file" class="apply" id="profile" name="profile" onchange="validateimg(this)"/>

<br>

<div>작가명</div>
<input type="text" class="apply" id="writerName" name="writerName" placeholder="작가명">	

<br><br>

<div>대표 소개 한줄</div>
<input type="text" class="apply" id="intro" name="intro" placeholder="내용을 입력해주세요.">

<br><br>

<div>작가 이력</div>
<input type="text" class="apply" id="history" name="history" placeholder="내용을 입력해주세요.">

<div>본인 소설 1편 업로드</div>
<input  type="file" class="apply" id="newWriting" name="newWriting" accept=".txt" onchange="validatetxt(this)"/>

<br><br>
<div>PR글 작성</div>
<textarea rows="10" cols="50" class="apply" id="publicRelations" name="publicRelations"></textarea>

<br><br>
<input type="submit" value="작가신청하기">

</form>

<script type="text/javascript">
/* 
function checkAll(){
	
	
	//check
	function check(id) {
        //Id가 입력되었는지 확인하기
        if (!checkExistData(id, "아이디를")){
            return false;
		}
	}
	
	//공백확인
	function checkExistData(value, dataName) {
        if (value == "") {
            alert(dataName + " 입력해주세요!");
            return false;
        }
        return true;
    }
} */

function validateimg(ctrl) { 
    var fileUpload = ctrl;
    var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(.jpg|.png|.gif)$");
    if (regex.test(fileUpload.value.toLowerCase())) {
        if (typeof (fileUpload.files) != "undefined") {
            var reader = new FileReader();
            reader.readAsDataURL(fileUpload.files[0]);
            reader.onload = function (e) {
                var image = new Image();
                image.src = e.target.result;
                image.onload = function () {
                    var height = this.height;
                    var width = this.width;
                    if (height != 180 && width != 180) {
                        alert("프로필 사진의 사이즈는 180 x 180px입니다.");
                        return false;
                    }else{
                        alert("이미지가 정상적으로 업로드 되었습니다.");
                        $("#profile-image").attr("src", e.target.result);
                        return true;
                    }
                };
            }
        } else {
            alert("이 브라우저는 HTML5를 지원하지 않습니다.");
            return false;
        }
    } else {
        alert("올바른 파일(jpg/.png/.gif)을 선택해주세요.");
        return false;
    }
}

function validatetxt(file) {
    var FileSize = file.files[0].size / 1024 / 1024; // in MB
    console.log(FileSize);
    if (FileSize > 2) {
        alert('텍스트 파일을 2MB이내로 업로드 해주세요..');
        $("#newWriting").val(''); //for clearing with Jquery
    } else {
    }
}


</script>
</body>
</html>

