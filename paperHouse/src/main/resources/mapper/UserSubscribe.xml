<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.bit.paperhouse.dao.MyPageRepository">

<select id="getWriterNames"  parameterType="com.bit.paperhouse.dto.WriterDto" resultType="com.bit.paperhouse.dto.WriterDto">
SELECT W.WRITER_NAME AS NAME,U.END_DATE AS ENDDATE 
FROM USER_SUBSCRIBE U INNER JOIN WRITER W ON U.USER_SEQ =W.USER_SEQ AND U.WRITER_SEQ=W.WRITER_SEQ
WHERE U.USER_SEQ=#{userSeq}
</select>

<update id="updateEndSub" parameterType="com.bit.paperhouse.dto.WriterDto"> 
	UPDATE USER_SUBSCRIBE
	SET status=status-1
	WHERE USER_SEQ=#{userSeq} and END_DATE=#{endDate}
</update>

<select id="selectStatus" parameterType="com.bit.paperhouse.dto.WriterDto" resultType="java.lang.Integer">
	SELECT STATUS
	FROM USER_SUBSCRIBE
	WHERE USER_SEQ=#{userSeq} AND WRITER_SEQ=#{writerSeq}
</select>



</mapper>